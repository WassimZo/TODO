{"ast":null,"code":"import _regeneratorRuntime from\"/home/wassimzo/Bureau/WEB/ZeroToHero/TODO/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/wassimzo/Bureau/WEB/ZeroToHero/TODO/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/wassimzo/Bureau/WEB/ZeroToHero/TODO/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useRef,useState}from\"react\";import{UserContext}from\"../../Context/UserContext\";import CSRFToken from\"../../Component/CSRFToken\";import\"../LoginPage/Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),validation=_useState2[0],setValidation=_useState2[1];var _useContext=useContext(UserContext),signUp=_useContext.signUp;var inputs=useRef([]);var addinputs=function addinputs(e){if(e&&!inputs.current.includes(e)){inputs.current.push(e);}};var formRef=useRef();var handleForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var cred;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();// Validation coté front\nif(!((inputs.current[1].value.length||inputs.current[2].value.length)<8)){_context.next=6;break;}setValidation(\"8 characters minimum !\");return _context.abrupt(\"return\");case 6:if(!(inputs.current[1].value!==inputs.current[2].value)){_context.next=9;break;}setValidation(\"passwords do not match !\");return _context.abrupt(\"return\");case 9:_context.prev=9;_context.next=12;return signUp(inputs.current[0].value,inputs.current[1].value);case 12:cred=_context.sent;formRef.current.reset();setValidation(\"\");_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](9);if(_context.t0.code===\"ERR_BAD_REQUEST\"){setValidation(\"Username Already exists\");}case 20:case\"end\":return _context.stop();}},_callee,null,[[9,17]]);}));return function handleForm(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"main-title\",children:\"TODO\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"#\",className:\"login-form\",onSubmit:function onSubmit(e){handleForm(e);},ref:formRef,children:[/*#__PURE__*/_jsx(CSRFToken,{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",ref:addinputs}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pwd\",children:\"Password :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pwd\",id:\"pwd\",ref:addinputs}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirm-pwd\",children:\"Confirm Password :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirm-pwd\",id:\"confirm-pwd\",ref:addinputs}),/*#__PURE__*/_jsx(\"span\",{children:validation}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Have an account ? \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Login here\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-btn\",children:\"Register\"})]})]});}","map":{"version":3,"names":["React","useContext","useRef","useState","UserContext","CSRFToken","jsx","_jsx","jsxs","_jsxs","Register","_useState","_useState2","_slicedToArray","validation","setValidation","_useContext","signUp","inputs","addinputs","e","current","includes","push","formRef","handleForm","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","cred","wrap","_callee$","_context","prev","next","preventDefault","value","length","abrupt","sent","reset","t0","code","stop","_x","apply","arguments","className","children","action","onSubmit","ref","htmlFor","type","id","name","href"],"sources":["/home/wassimzo/Bureau/WEB/ZeroToHero/TODO/frontend/src/Pages/RegisterPage/Register.js"],"sourcesContent":["import React, { useContext, useRef, useState } from \"react\";\nimport { UserContext } from \"../../Context/UserContext\";\nimport CSRFToken from \"../../Component/CSRFToken\";\nimport \"../LoginPage/Login.css\";\n\nexport default function Register() {\n\tconst [validation, setValidation] = useState(\"\");\n\tconst { signUp } = useContext(UserContext);\n\n\tconst inputs = useRef([]);\n\tconst addinputs = (e) => {\n\t\tif (e && !inputs.current.includes(e)) {\n\t\t\tinputs.current.push(e);\n\t\t}\n\t};\n\tconst formRef = useRef();\n\n\tconst handleForm = async (e) => {\n\t\te.preventDefault();\n\n\t\t// Validation coté front\n\t\tif (\n\t\t\t(inputs.current[1].value.length || inputs.current[2].value.length) < 8\n\t\t) {\n\t\t\tsetValidation(\"8 characters minimum !\");\n\t\t\treturn;\n\t\t} else if (inputs.current[1].value !== inputs.current[2].value) {\n\t\t\tsetValidation(\"passwords do not match !\");\n\t\t\treturn;\n\t\t}\n\n\t\t//Validation coté back\n\t\ttry {\n\t\t\tconst cred = await signUp(\n\t\t\t\tinputs.current[0].value,\n\t\t\t\tinputs.current[1].value\n\t\t\t);\n\t\t\tformRef.current.reset();\n\t\t\tsetValidation(\"\");\n\t\t} catch (err) {\n\t\t\tif (err.code === \"ERR_BAD_REQUEST\") {\n\t\t\t\tsetValidation(\"Username Already exists\");\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"main-container\">\n\t\t\t<h1 className=\"main-title\">TODO</h1>\n\t\t\t<form\n\t\t\t\taction=\"#\"\n\t\t\t\tclassName=\"login-form\"\n\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\thandleForm(e);\n\t\t\t\t}}\n\t\t\t\tref={formRef}\n\t\t\t>\n\t\t\t\t<CSRFToken />\n\t\t\t\t<label htmlFor=\"username\">Username :</label>\n\t\t\t\t<input type=\"text\" id=\"username\" name=\"username\" ref={addinputs} />\n\t\t\t\t<label htmlFor=\"pwd\">Password :</label>\n\t\t\t\t<input type=\"password\" name=\"pwd\" id=\"pwd\" ref={addinputs} />\n\t\t\t\t<label htmlFor=\"confirm-pwd\">Confirm Password :</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tname=\"confirm-pwd\"\n\t\t\t\t\tid=\"confirm-pwd\"\n\t\t\t\t\tref={addinputs}\n\t\t\t\t/>\n\t\t\t\t<span>{validation}</span>\n\t\t\t\t<span>\n\t\t\t\t\tHave an account ? <a href=\"/register\">Login here</a>\n\t\t\t\t</span>\n\t\t\t\t<button type=\"submit\" className=\"login-btn\">\n\t\t\t\t\tRegister\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}