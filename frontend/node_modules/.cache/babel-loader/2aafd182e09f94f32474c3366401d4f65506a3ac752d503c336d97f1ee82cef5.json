{"ast":null,"code":"var _jsxFileName = \"/home/wassimzo/Bureau/WEB/ZeroToHero/TODO/frontend/src/Context/UserContext.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState, useEffect, createContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.xsrfCookieName = \"csrftoken\";\naxios.defaults.xsrfHeaderName = \"X-CSRFToken\";\naxios.defaults.withCredentials = true;\nconst client = axios.create({\n  baseURL: \"http://127.0.0.1:8000/api\"\n});\nconst config = {\n  headers: {\n    \"Accept\": \"application/json\",\n    \"content-Type\": \"application/json\",\n    \"X-CSRFToken\": Cookies.get(\"csrftoken\")\n  }\n};\nexport const UserContext = /*#__PURE__*/createContext();\nexport function UserContextProvider(props) {\n  _s();\n  const [currentUser, setCurrentUser] = useState();\n  const [username, setUsername] = useState();\n  const navigate = useNavigate();\n  useEffect(() => {\n    client.get(\"/user\", config).then(res => {\n      console.log(res);\n      setCurrentUser(true);\n    }).catch(err => {\n      setCurrentUser(false);\n    });\n  }, []);\n  const signUp = (username, pwd) => {\n    client.post(\"/register\", {\n      username: username,\n      password: pwd\n    }, config).then(res => {\n      client.post(\"/login\", {\n        username: username,\n        password: pwd\n      }, config).then(res => {\n        setCurrentUser(true);\n        setUsername(username);\n        navigate(\"/private/home\");\n      });\n    });\n  };\n  const signIn = (username, pwd) => {\n    client.post(\"/login\", {\n      username: username,\n      password: pwd\n    }).then(res => {\n      setCurrentUser(true);\n      setUsername(username);\n      navigate(\"/private/home\");\n    });\n  };\n  const logout = () => {\n    client.post(\"/logout\").then(res => {\n      setCurrentUser(false);\n      navigate(\"/private/home\");\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      signUp,\n      currentUser,\n      signIn,\n      logout,\n      username\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 3\n  }, this);\n}\n_s(UserContextProvider, \"KkGyqBDCsy99UO2TqUeIaz7MyqA=\", false, function () {\n  return [useNavigate];\n});\n_c = UserContextProvider;\nvar _c;\n$RefreshReg$(_c, \"UserContextProvider\");","map":{"version":3,"names":["useContext","useState","useEffect","createContext","useNavigate","axios","Cookies","jsxDEV","_jsxDEV","defaults","xsrfCookieName","xsrfHeaderName","withCredentials","client","create","baseURL","config","headers","get","UserContext","UserContextProvider","props","_s","currentUser","setCurrentUser","username","setUsername","navigate","then","res","console","log","catch","err","signUp","pwd","post","password","signIn","logout","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/wassimzo/Bureau/WEB/ZeroToHero/TODO/frontend/src/Context/UserContext.js"],"sourcesContent":["import { useContext, useState, useEffect, createContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\naxios.defaults.xsrfCookieName = \"csrftoken\";\naxios.defaults.xsrfHeaderName = \"X-CSRFToken\";\naxios.defaults.withCredentials = true;\n\nconst client = axios.create({\n\tbaseURL: \"http://127.0.0.1:8000/api\",\n});\n\nconst config = {\n\theaders: {\n\t\t\"Accept\": \"application/json\",\n\t\t\"content-Type\": \"application/json\",\n\t\t\"X-CSRFToken\": Cookies.get(\"csrftoken\"),\n\t}\n};\n\nexport const UserContext = createContext();\n\nexport function UserContextProvider(props) {\n\tconst [currentUser, setCurrentUser] = useState();\n\tconst [username, setUsername] = useState();\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tclient\n\t\t\t.get(\"/user\", config)\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tsetCurrentUser(true);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tsetCurrentUser(false);\n\t\t\t});\n\t}, []);\n\n\tconst signUp = (username, pwd) => {\n\t\tclient\n\t\t\t.post(\"/register\", {\n\t\t\t\tusername: username,\n\t\t\t\tpassword: pwd,\n\t\t\t}, config)\n\t\t\t.then((res) => {\n\t\t\t\tclient\n\t\t\t\t\t.post(\"/login\", {\n\t\t\t\t\t\tusername: username,\n\t\t\t\t\t\tpassword: pwd,\n\t\t\t\t\t}, config)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tsetCurrentUser(true);\n\t\t\t\t\t\tsetUsername(username);\n\t\t\t\t\t\tnavigate(\"/private/home\");\n\t\t\t\t\t});\n\t\t\t});\n\t};\n\n\tconst signIn = (username, pwd) => {\n\t\tclient\n\t\t\t.post(\"/login\", {\n\t\t\t\tusername: username,\n\t\t\t\tpassword: pwd,\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tsetCurrentUser(true);\n\t\t\t\tsetUsername(username);\n\t\t\t\tnavigate(\"/private/home\");\n\t\t\t});\n\t};\n\n\tconst logout = () => {\n\t\tclient.post(\"/logout\").then((res) => {\n\t\t\tsetCurrentUser(false);\n\t\t\tnavigate(\"/private/home\");\n\t\t});\n\t};\n\n\treturn (\n\t\t<UserContext.Provider\n\t\t\tvalue={{ signUp, currentUser, signIn, logout, username }}\n\t\t>\n\t\t\t{props.children}\n\t\t</UserContext.Provider>\n\t);\n}\n"],"mappings":";;AAAA,SAASA,UAAU,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,aAAa,QAAQ,OAAO;AACtE,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhCH,KAAK,CAACI,QAAQ,CAACC,cAAc,GAAG,WAAW;AAC3CL,KAAK,CAACI,QAAQ,CAACE,cAAc,GAAG,aAAa;AAC7CN,KAAK,CAACI,QAAQ,CAACG,eAAe,GAAG,IAAI;AAErC,MAAMC,MAAM,GAAGR,KAAK,CAACS,MAAM,CAAC;EAC3BC,OAAO,EAAE;AACV,CAAC,CAAC;AAEF,MAAMC,MAAM,GAAG;EACdC,OAAO,EAAE;IACR,QAAQ,EAAE,kBAAkB;IAC5B,cAAc,EAAE,kBAAkB;IAClC,aAAa,EAAEX,OAAO,CAACY,GAAG,CAAC,WAAW;EACvC;AACD,CAAC;AAED,OAAO,MAAMC,WAAW,gBAAGhB,aAAa,CAAC,CAAC;AAE1C,OAAO,SAASiB,mBAAmBA,CAACC,KAAK,EAAE;EAAAC,EAAA;EAC1C,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,CAAC;EAChD,MAAM,CAACwB,QAAQ,EAAEC,WAAW,CAAC,GAAGzB,QAAQ,CAAC,CAAC;EAC1C,MAAM0B,QAAQ,GAAGvB,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACfW,MAAM,CACJK,GAAG,CAAC,OAAO,EAAEF,MAAM,CAAC,CACpBY,IAAI,CAAEC,GAAG,IAAK;MACdC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChBL,cAAc,CAAC,IAAI,CAAC;IACrB,CAAC,CAAC,CACDQ,KAAK,CAAEC,GAAG,IAAK;MACfT,cAAc,CAAC,KAAK,CAAC;IACtB,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMU,MAAM,GAAGA,CAACT,QAAQ,EAAEU,GAAG,KAAK;IACjCtB,MAAM,CACJuB,IAAI,CAAC,WAAW,EAAE;MAClBX,QAAQ,EAAEA,QAAQ;MAClBY,QAAQ,EAAEF;IACX,CAAC,EAAEnB,MAAM,CAAC,CACTY,IAAI,CAAEC,GAAG,IAAK;MACdhB,MAAM,CACJuB,IAAI,CAAC,QAAQ,EAAE;QACfX,QAAQ,EAAEA,QAAQ;QAClBY,QAAQ,EAAEF;MACX,CAAC,EAAEnB,MAAM,CAAC,CACTY,IAAI,CAAEC,GAAG,IAAK;QACdL,cAAc,CAAC,IAAI,CAAC;QACpBE,WAAW,CAACD,QAAQ,CAAC;QACrBE,QAAQ,CAAC,eAAe,CAAC;MAC1B,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EAED,MAAMW,MAAM,GAAGA,CAACb,QAAQ,EAAEU,GAAG,KAAK;IACjCtB,MAAM,CACJuB,IAAI,CAAC,QAAQ,EAAE;MACfX,QAAQ,EAAEA,QAAQ;MAClBY,QAAQ,EAAEF;IACX,CAAC,CAAC,CACDP,IAAI,CAAEC,GAAG,IAAK;MACdL,cAAc,CAAC,IAAI,CAAC;MACpBE,WAAW,CAACD,QAAQ,CAAC;MACrBE,QAAQ,CAAC,eAAe,CAAC;IAC1B,CAAC,CAAC;EACJ,CAAC;EAED,MAAMY,MAAM,GAAGA,CAAA,KAAM;IACpB1B,MAAM,CAACuB,IAAI,CAAC,SAAS,CAAC,CAACR,IAAI,CAAEC,GAAG,IAAK;MACpCL,cAAc,CAAC,KAAK,CAAC;MACrBG,QAAQ,CAAC,eAAe,CAAC;IAC1B,CAAC,CAAC;EACH,CAAC;EAED,oBACCnB,OAAA,CAACW,WAAW,CAACqB,QAAQ;IACpBC,KAAK,EAAE;MAAEP,MAAM;MAAEX,WAAW;MAAEe,MAAM;MAAEC,MAAM;MAAEd;IAAS,CAAE;IAAAiB,QAAA,EAExDrB,KAAK,CAACqB;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACM,CAAC;AAEzB;AAACxB,EAAA,CAhEeF,mBAAmB;EAAA,QAGjBhB,WAAW;AAAA;AAAA2C,EAAA,GAHb3B,mBAAmB;AAAA,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}