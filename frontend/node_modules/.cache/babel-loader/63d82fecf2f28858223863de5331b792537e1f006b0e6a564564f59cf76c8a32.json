{"ast":null,"code":"import _regeneratorRuntime from\"/home/wassimzo/Bureau/WEB/ZeroToHero/TODO/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/wassimzo/Bureau/WEB/ZeroToHero/TODO/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/wassimzo/Bureau/WEB/ZeroToHero/TODO/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useRef}from\"react\";import{UserContext}from\"../../Context/UserContext\";import CSRFToken from\"../../Component/CSRFToken\";import\"./Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),validation=_useState2[0],setValidation=_useState2[1];var _useContext=useContext(UserContext),signIn=_useContext.signIn;var inputs=useRef([]);var addinputs=function addinputs(e){if(e&&!inputs.current.includes(e)){inputs.current.push(e);}};var formRef=useRef();var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var cred;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();//validation coté serveur\n_context.prev=1;_context.next=4;return signIn(inputs.current[0].value,inputs.current[1].value);case 4:cred=_context.sent;formRef.current.reset();setValidation(\"\");console.log(\"logged in\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);setValidation(\"password or username incorrect\");case 13:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"main-title\",children:\"TODO\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"#\",className:\"login-form\",ref:formRef,onSubmit:function onSubmit(e){handleLogin(e);},children:[/*#__PURE__*/_jsx(CSRFToken,{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",ref:addinputs}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pwd\",children:\"Password :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pwd\",id:\"pwd\",ref:addinputs}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Dont have account ? \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Register here\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-btn\",children:\"Login\"})]})]});}","map":{"version":3,"names":["React","useState","useContext","useRef","UserContext","CSRFToken","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","validation","setValidation","_useContext","signIn","inputs","addinputs","e","current","includes","push","formRef","handleLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","cred","wrap","_callee$","_context","prev","next","preventDefault","value","sent","reset","console","log","t0","stop","_x","apply","arguments","className","children","action","ref","onSubmit","htmlFor","type","id","name","href"],"sources":["/home/wassimzo/Bureau/WEB/ZeroToHero/TODO/frontend/src/Pages/LoginPage/Login.js"],"sourcesContent":["import React, { useState, useContext, useRef } from \"react\";\nimport { UserContext } from \"../../Context/UserContext\";\nimport CSRFToken from \"../../Component/CSRFToken\";\nimport \"./Login.css\";\n\nexport default function Login() {\n\tconst [validation, setValidation] = useState(\"\");\n\tconst { signIn } = useContext(UserContext);\n\n\tconst inputs = useRef([]);\n\tconst addinputs = (e) => {\n\t\tif (e && !inputs.current.includes(e)) {\n\t\t\tinputs.current.push(e);\n\t\t}\n\t};\n\n\tconst formRef = useRef();\n\n\tconst handleLogin = async (e) => {\n\t\te.preventDefault();\n\t\t//validation coté serveur\n\t\ttry {\n\t\t\tconst cred = await signIn(\n\t\t\t\tinputs.current[0].value,\n\t\t\t\tinputs.current[1].value\n\t\t\t);\n\t\t\tformRef.current.reset();\n\t\t\tsetValidation(\"\");\n\t\t\tconsole.log(\"logged in\");\n\t\t} catch (err) {\n\t\t\tsetValidation(\"password or username incorrect\");\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"main-container\">\n\t\t\t<h1 className=\"main-title\">TODO</h1>\n\t\t\t<form\n\t\t\t\taction=\"#\"\n\t\t\t\tclassName=\"login-form\"\n\t\t\t\tref={formRef}\n\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\thandleLogin(e);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<CSRFToken />\n\t\t\t\t<label htmlFor=\"username\">Username :</label>\n\t\t\t\t<input type=\"text\" id=\"username\" name=\"username\" ref={addinputs} />\n\t\t\t\t<label htmlFor=\"pwd\">Password :</label>\n\t\t\t\t<input type=\"password\" name=\"pwd\" id=\"pwd\" ref={addinputs} />\n\t\t\t\t<span>\n\t\t\t\t\tDont have account ? <a href=\"/register\">Register here</a>\n\t\t\t\t</span>\n\t\t\t\t<button type=\"submit\" className=\"login-btn\">\n\t\t\t\t\tLogin\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}